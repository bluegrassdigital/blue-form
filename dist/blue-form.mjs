import{each as e,listenCollection as t,trigger as n,filter as i,listen as s}from"blue-js";var r=function(e,n,i){var s=this;this.name=n,this.inputs=e,t(this.inputs,"change",function(e){return i(s,e)})};r.prototype.getValue=function(){if(1===this.inputs.length)return this.inputs[0].value||"on";var t=[];return e(this.inputs,function(e){e.checked&&t.push(e.value||"on")}),0===t.length?null:t},r.prototype.setValue=function(t,i){t=Array.isArray(t)?t:[t],e(this.inputs,function(e){e.checked=-1!==t.indexOf(e.value)}),i||n(this.inputs[0],"change")};var o=function(e,n,i){var s=this;this.name=n,this.inputs=e,t(this.inputs,"change",function(e){return i(s,e)})};o.prototype.getValue=function(){var t;return e(this.inputs,function(e){e.checked&&(t=e)}),t?t.value:null},o.prototype.setValue=function(t,i){e(this.inputs,function(e){e.checked=e.value===t}),i||n(this.inputs[0],"change")};var u=function(e,t,n){var i=this;this.name=t,this.select=e[0],s(this.select,"change",function(e){return n(i,e)})};u.prototype.getValue=function(){if("select-one"===this.select.type)return this.select.value;var e=this.select.querySelectorAll("option");return i(e,function(e){return e.selected}).map(function(e){return e.value})},u.prototype.getSelectedOptionText=function(){return this.select.querySelectorAll("option")[this.getSelectedIndex()].textContent},u.prototype.setValue=function(t,i){if("select-one"===this.select.type)this.select.value=t;else{var s=this.select.querySelectorAll("option");t=Array.isArray(t)?t:[t],e(s,function(e){-1!==t.indexOf(e.value)?e.selected="selected":e.removeAttribute("selected")})}i||n(this.select,"change")},u.prototype.getSelectedIndex=function(){return this.select.selectedIndex},u.prototype.setSelectIndex=function(e){this.select.selectedIndex=e,n(this.select,"change")},u.prototype.getSelectOptions=function(){var t=this.select.querySelectorAll("option"),n=[];return e(t,function(e){var t={Text:e.textContent,Value:e.value||e.textContent};e.selected&&(t.Selected=!0),n.push(t)}),n},u.prototype.changeSelectOptions=function(e,t,i){var s=this,r=this.getValue(),o=i?this.getSelectOptions()[0]:null,u=o?[o].concat(e):e;this.suppressEvents=!0,this.select.length=0,u.forEach(function(e,t){s.select[t]=e.Value?new window.Option(e.Text,e.Value):new window.Option(e.Text)}),t&&r&&this.setValue(r),this.suppressEvents=!1,n(this.select,"change")};var a=function(e,t,n){var i=this;this.name=t,this.textarea=e[0],s(this.textarea,"input change",function(e){return n(i,e)})};a.prototype.getValue=function(){return this.textarea.value},a.prototype.setValue=function(e,t){this.textarea.value=e,t||n(this.textarea,"change")};var l=function(e,t,n){var i=this;this.name=t,this.input=e[0],s(this.input,"input change",function(e){return n(i,e)})};function c(e,t){if(""===e)return!1;var n=document.querySelectorAll("[name="+e+"]"),i=function(e){switch(e){case"select-one":case"select-multiple":return u;case"radio":return o;case"checkbox":return r;case"textarea":return a;case"text":case"email":case"password":case"search":case"tel":case"url":case"number":case"color":case"range":case"hidden":case"date":case"month":case"week":case"datetime":return l}}(n[0].type);return i?new i(n,e,t):void 0}l.prototype.getValue=function(){return this.input.value},l.prototype.setValue=function(e,t){this.input.value=e,t||n(this.input,"change")};var h=function(e,t){this.field=c(e.name,t)};h.prototype.getValue=function(){return this.field.getValue()},h.prototype.setValue=function(e,t){return this.field.setValue(e,t)};var p=function(e,t){this.el=e,this.fields={},this.options=t||{},this.onFieldUpdated=this.onFieldUpdated.bind(this),this.createFields()};p.prototype.createFields=function(){this.fieldEls=this.el.querySelectorAll("input[name], select[name], textarea[name]");for(var e=0;e<this.fieldEls.length;e++){var t=this.fieldEls[e];if(!this.fields[t.name]){var n=c(t.name,this.onFieldUpdated);n&&(this.fields[t.name]=n)}}},p.prototype.reset=function(){this.el.reset&&this.el.reset()},p.prototype.onFieldUpdated=function(e,t){"function"==typeof this.options.onFieldUpdated&&this.options.onFieldUpdated(e,t)},p.prototype.setFieldValues=function(e,t){for(var n in void 0===t&&(t=!1),this.createFields(),this.fields)e[n]&&this.fields.hasOwnProperty(n)&&this.fields[n].setValue(e[n],t)},p.prototype.getFieldValues=function(){this.createFields();var e={};for(var t in this.fields)t&&this.fields.hasOwnProperty(t)&&(e[t]=this.fields[t].getValue());return e};export{h as Input,p as Form};
//# sourceMappingURL=blue-form.mjs.map

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("blue-js")):"function"==typeof define&&define.amd?define(["exports","blue-js"],t):t(e.blueForm={},e.blue)}(this,function(e,t){var n=function(e,n,i){var s=this;this.name=n,this.inputs=e,t.listenCollection(this.inputs,"change",function(e){return i(s,e)})};n.prototype.getValue=function(){if(1===this.inputs.length)return this.inputs[0].value||"on";var e=[];return t.each(this.inputs,function(t){t.checked&&e.push(t.value||"on")}),0===e.length?null:e},n.prototype.setValue=function(e,n){e=Array.isArray(e)?e:[e],t.each(this.inputs,function(t){t.checked=-1!==e.indexOf(t.value)}),n||t.trigger(this.inputs[0],"change")};var i=function(e,n,i){var s=this;this.name=n,this.inputs=e,t.listenCollection(this.inputs,"change",function(e){return i(s,e)})};i.prototype.getValue=function(){var e;return t.each(this.inputs,function(t){t.checked&&(e=t)}),e?e.value:null},i.prototype.setValue=function(e,n){t.each(this.inputs,function(t){t.checked=t.value===e}),n||t.trigger(this.inputs[0],"change")};var s=function(e,n,i){var s=this;this.name=n,this.select=e[0],t.listen(this.select,"change",function(e){return i(s,e)})};s.prototype.getValue=function(){if("select-one"===this.select.type)return this.select.value;var e=this.select.querySelectorAll("option");return t.filter(e,function(e){return e.selected}).map(function(e){return e.value})},s.prototype.getSelectedOptionText=function(){return this.select.querySelectorAll("option")[this.getSelectedIndex()].textContent},s.prototype.setValue=function(e,n){if("select-one"===this.select.type)this.select.value=e;else{var i=this.select.querySelectorAll("option");e=Array.isArray(e)?e:[e],t.each(i,function(t){-1!==e.indexOf(t.value)?t.selected="selected":t.removeAttribute("selected")})}n||t.trigger(this.select,"change")},s.prototype.getSelectedIndex=function(){return this.select.selectedIndex},s.prototype.setSelectIndex=function(e){this.select.selectedIndex=e,t.trigger(this.select,"change")},s.prototype.getSelectOptions=function(){var e=this.select.querySelectorAll("option"),n=[];return t.each(e,function(e){var t={Text:e.textContent,Value:e.value||e.textContent};e.selected&&(t.Selected=!0),n.push(t)}),n},s.prototype.changeSelectOptions=function(e,n,i){var s=this,r=this.getValue(),o=i?this.getSelectOptions()[0]:null,u=o?[o].concat(e):e;this.suppressEvents=!0,this.select.length=0,u.forEach(function(e,t){s.select[t]=e.Value?new window.Option(e.Text,e.Value):new window.Option(e.Text)}),n&&r&&this.setValue(r),this.suppressEvents=!1,t.trigger(this.select,"change")};var r=function(e,n,i){var s=this;this.name=n,this.textarea=e[0],t.listen(this.textarea,"input change",function(e){return i(s,e)})};r.prototype.getValue=function(){return this.textarea.value},r.prototype.setValue=function(e,n){this.textarea.value=e,n||t.trigger(this.textarea,"change")};var o=function(e,n,i){var s=this;this.name=n,this.input=e[0],t.listen(this.input,"input change",function(e){return i(s,e)})};function u(e,t){if(""===e)return!1;var u=document.querySelectorAll("[name="+e+"]"),l=function(e){switch(e){case"select-one":case"select-multiple":return s;case"radio":return i;case"checkbox":return n;case"textarea":return r;case"text":case"email":case"password":case"search":case"tel":case"url":case"number":case"color":case"range":case"hidden":case"date":case"month":case"week":case"datetime":return o}}(u[0].type);return l?new l(u,e,t):void 0}o.prototype.getValue=function(){return this.input.value},o.prototype.setValue=function(e,n){this.input.value=e,n||t.trigger(this.input,"change")};var l=function(e,t){this.field=u(e.name,t)};l.prototype.getValue=function(){return this.field.getValue()},l.prototype.setValue=function(e,t){return this.field.setValue(e,t)};var a=function(e,t){this.el=e,this.fields={},this.options=t||{},this.onFieldUpdated=this.onFieldUpdated.bind(this),this.createFields()};a.prototype.createFields=function(){this.fieldEls=this.el.querySelectorAll("input[name], select[name], textarea[name]");for(var e=0;e<this.fieldEls.length;e++){var t=this.fieldEls[e];if(!this.fields[t.name]){var n=u(t.name,this.onFieldUpdated);n&&(this.fields[t.name]=n)}}},a.prototype.reset=function(){this.el.reset&&this.el.reset()},a.prototype.onFieldUpdated=function(e,t){"function"==typeof this.options.onFieldUpdated&&this.options.onFieldUpdated(e,t)},a.prototype.setFieldValues=function(e,t){for(var n in void 0===t&&(t=!1),this.createFields(),this.fields)e[n]&&this.fields.hasOwnProperty(n)&&this.fields[n].setValue(e[n],t)},a.prototype.getFieldValues=function(){this.createFields();var e={};for(var t in this.fields)t&&this.fields.hasOwnProperty(t)&&(e[t]=this.fields[t].getValue());return e},e.Input=l,e.Form=a});
//# sourceMappingURL=blue-form.umd.js.map
